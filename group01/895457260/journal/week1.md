# 简略描述CPU的工作方式
　　电脑，这个用法丰富而且功能异常强大的机器，也叫做计算机。计算机这个词听起来似乎并不能概括这种机器的功能，但它就是叫计算机。究其原因，无论多么复杂，多么神奇的功能，都能归结为大量的数据计算。加，减，乘，除，与，或，非……这些简单的计算经过组合，实现了令人眼花缭乱的效果。  
　　那么计算机如何计算？这是第一个问题。  
　　众所周知，计算机内部使用二进制，也就是0和1。而利用继电器（或晶体管）可以做成能处理二进制数的逻辑门（与/或/非门），用逻辑门可以组成加法器等各种器件（当然这些也是针对二进制的）。这些器件接受外部的二进制输入，再经过一系列变换，得到二进制的结果，最后传出外部。大学的“数字逻辑”这门课里已经花了大篇幅进行说明。  
## 如何进行计算：ALU
　　首先要有一个东西，能从外部接受2个数据，然后把它们加减乘除与或非，再传出一个结果，而且还能随意控制到底做加法还是减法，还是别的。这个东西叫“ALU”，就是Arithmetic Logic Unit，算术逻辑单元。它实际上除了能接受2个数据进行计算以外，还能接受一堆别的数据（信号），用来控制做哪种计算，这些额外的输入就叫做“控制信号”。  
```
　　　　ALU
　　　　输入：进行计算的数据2个 + 控制信号若干
　　　　输出：计算结果
```  
　　有了ALU，就可以做各种各样的计算。  
## 数据的来源和去处：内存
　　有一些数据来自你的内存条。内存实际上是存储器，可以保存二进制数，用于给ALU计算。这块存储器分为很多小格子，每个格子都有唯一编号称为“地址”，格子里能放一个数据。  
　　存储器能接受至少3个输入：1地址、2数据、3读写控制端。有至少1个输出：1读出的数据。  
　　举个例子：输入1表示了一个小格子，如果输入3为0表示读，那么就会输出这个格子里的数据，输入2会被忽略。如果输入3为1表示写，那么就会用输入2的数据覆盖掉格子里原有的数据，输出会被忽略。  
## ALU和内存交互：组成CPU
　　要有某块逻辑电路把地址、数据、读写控制送给内存，然后获得内存里的数据传给ALU计算，再把结果送回内存。但ALU只能计算，这块逻辑电路不属于ALU，于是我们可以把ALU和这块逻辑电路放在一起，叫做CPU，Central Processing Unit，中央处理器。  
## 控制信号：指令译码
　　控制信号有很多个（每个控制信号都是1位二进制），如果把需要的控制信号一个一个并排放到内存里，那么势必导致内存空间的浪费（因为内存里一个格子能存放很多位二进制数），为此，我们另拿一块逻辑电路，让它接受一个内存格子的二进制输入，产生若干输出（就是那些控制信号）。这个逻辑电路就叫做“指令译码器”，把它放进CPU里。应该放进指令译码器的数据，称为“指令”。  
　　于是整个计算过程就变成了：  
```
　　　　1、从内存取出一个格子（是指令），放进指令译码器，得到若干组控制信号。
　　　　2、再从内存取出2个格子（是数据），传给ALU进行计算。
　　　　3、计算结果写回内存。
```
　　　　（这个过程假设所有数据都来自内存，实际上并非这样）  
## 区分指令和数据
　　这时又有新的问题产生了：1和2中同样是从内存取出格子，如何判断它是指令还是数据？CPU里还有一个东西叫“PC”，Program Counter，程序计数器。它能保存1个数，表示内存地址。从内存取指令，会把PC的地址送到内存，这时会控制内存的输出转向指令译码器。从内存取计算所用的数据，这个操作不使用PC的地址，那时内存的输出就不会指向指令译码器，而是直接传给ALU。  
## 更大的存储空间：硬盘
　　计算机通过某种方式不断重复上面的计算过程，只要内存里有正确排列的指令和数据，计算机就能自动工作，但是内存的容量比较小，不能存放过量的数据，于是就用到了硬盘。  
　　硬盘的容量大，可以先把指令和数据放到硬盘里，需要时再由内存来取，读写硬盘和读写内存相似。  
　　双击硬盘里的一个exe，exe中的指令和数据就会自动进入内存，然后由CPU做运算，结果还可以写回硬盘。  
（这篇文章忽略了寄存器、缓存、总线等构造，假设所有数据都必须来自内存）  
